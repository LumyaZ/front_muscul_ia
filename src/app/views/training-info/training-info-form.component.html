<div class="training-info-form-container">
  <!-- Message de bienvenue -->
  <div class="welcome-message" *ngIf="currentUser">
    <h1>Bienvenue {{ currentUser.profile?.firstName || 'Utilisateur' }} !</h1>
    <p class="welcome-text">
      Félicitations pour votre inscription ! Pour personnaliser votre expérience d'entraînement, 
      veuillez compléter les informations ci-dessous.
    </p>
    <div class="user-info">
      <p><strong>Email :</strong> {{ currentUser.email }}</p>
      <p *ngIf="currentUser.profile"><strong>Nom complet :</strong> {{ currentUser.profile.firstName }} {{ currentUser.profile.lastName }}</p>
    </div>
  </div>

  <div class="form-header">
    <h2>{{ isEditMode ? 'Modifier les informations d\'entraînement' : 'Créer les informations d\'entraînement' }}</h2>
    <p class="form-description">
      {{ isEditMode ? 'Mettez à jour vos informations d\'entraînement pour personnaliser votre expérience.' : 'Configurez vos informations d\'entraînement pour personnaliser votre expérience.' }}
    </p>
  </div>

  <form [formGroup]="trainingInfoForm" (ngSubmit)="onSubmit()" class="training-info-form">
    
    <!-- Personal Information Section -->
    <div class="form-section">
      <h3>Informations personnelles</h3>
      
      <div class="form-row">
        <div class="form-group">
          <label for="gender">Genre *</label>
          <select id="gender" formControlName="gender" class="form-control">
            <option value="">Sélectionnez un genre</option>
            <option *ngFor="let gender of genderOptions" [value]="gender">
              {{ getDisplayName(gender, genderDisplayNames) }}
            </option>
          </select>
          <div *ngIf="trainingInfoForm.get('gender')?.invalid && trainingInfoForm.get('gender')?.touched" class="error-message">
            Le genre est obligatoire
          </div>
        </div>

        <div class="form-group">
          <label for="weight">Poids (kg) *</label>
          <input type="number" id="weight" formControlName="weight" class="form-control" min="30" max="300" step="0.1">
          <div *ngIf="trainingInfoForm.get('weight')?.invalid && trainingInfoForm.get('weight')?.touched" class="error-message">
            <span *ngIf="trainingInfoForm.get('weight')?.errors?.['required']">Le poids est obligatoire</span>
            <span *ngIf="trainingInfoForm.get('weight')?.errors?.['min']">Le poids doit être d'au moins 30 kg</span>
            <span *ngIf="trainingInfoForm.get('weight')?.errors?.['max']">Le poids ne peut pas dépasser 300 kg</span>
          </div>
        </div>

        <div class="form-group">
          <label for="height">Taille (cm) *</label>
          <input type="number" id="height" formControlName="height" class="form-control" min="100" max="250" step="0.1">
          <div *ngIf="trainingInfoForm.get('height')?.invalid && trainingInfoForm.get('height')?.touched" class="error-message">
            <span *ngIf="trainingInfoForm.get('height')?.errors?.['required']">La taille est obligatoire</span>
            <span *ngIf="trainingInfoForm.get('height')?.errors?.['min']">La taille doit être d'au moins 100 cm</span>
            <span *ngIf="trainingInfoForm.get('height')?.errors?.['max']">La taille ne peut pas dépasser 250 cm</span>
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="bodyFatPercentage">Pourcentage de graisse corporelle (%)</label>
          <input type="number" id="bodyFatPercentage" formControlName="bodyFatPercentage" class="form-control" min="3" max="50" step="0.1">
          <div *ngIf="trainingInfoForm.get('bodyFatPercentage')?.invalid && trainingInfoForm.get('bodyFatPercentage')?.touched" class="error-message">
            <span *ngIf="trainingInfoForm.get('bodyFatPercentage')?.errors?.['min']">Le pourcentage doit être d'au moins 3%</span>
            <span *ngIf="trainingInfoForm.get('bodyFatPercentage')?.errors?.['max']">Le pourcentage ne peut pas dépasser 50%</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Training Experience Section -->
    <div class="form-section">
      <h3>Expérience d'entraînement</h3>
      
      <div class="form-row">
        <div class="form-group">
          <label for="experienceLevel">Niveau d'expérience *</label>
          <select id="experienceLevel" formControlName="experienceLevel" class="form-control">
            <option value="">Sélectionnez votre niveau</option>
            <option *ngFor="let level of experienceLevelOptions" [value]="level">
              {{ getDisplayName(level, experienceLevelDisplayNames) }}
            </option>
          </select>
          <div *ngIf="trainingInfoForm.get('experienceLevel')?.invalid && trainingInfoForm.get('experienceLevel')?.touched" class="error-message">
            Le niveau d'expérience est obligatoire
          </div>
        </div>

        <div class="form-group">
          <label for="mainGoal">Objectif principal *</label>
          <select id="mainGoal" formControlName="mainGoal" class="form-control">
            <option value="">Sélectionnez votre objectif</option>
            <option *ngFor="let goal of mainGoalOptions" [value]="goal">
              {{ getDisplayName(goal, mainGoalDisplayNames) }}
            </option>
          </select>
          <div *ngIf="trainingInfoForm.get('mainGoal')?.invalid && trainingInfoForm.get('mainGoal')?.touched" class="error-message">
            L'objectif principal est obligatoire
          </div>
        </div>
      </div>
    </div>

    <!-- Training Preferences Section -->
    <div class="form-section">
      <h3>Préférences d'entraînement</h3>
      
      <div class="form-row">
        <div class="form-group">
          <label for="sessionFrequency">Fréquence des sessions *</label>
          <select id="sessionFrequency" formControlName="sessionFrequency" class="form-control">
            <option value="">Sélectionnez la fréquence</option>
            <option *ngFor="let frequency of sessionFrequencyOptions" [value]="frequency">
              {{ getDisplayName(frequency, sessionFrequencyDisplayNames) }}
            </option>
          </select>
          <div *ngIf="trainingInfoForm.get('sessionFrequency')?.invalid && trainingInfoForm.get('sessionFrequency')?.touched" class="error-message">
            La fréquence des sessions est obligatoire
          </div>
        </div>

        <div class="form-group">
          <label for="sessionDuration">Durée des sessions *</label>
          <select id="sessionDuration" formControlName="sessionDuration" class="form-control">
            <option value="">Sélectionnez la durée</option>
            <option *ngFor="let duration of sessionDurationOptions" [value]="duration">
              {{ getDisplayName(duration, sessionDurationDisplayNames) }}
            </option>
          </select>
          <div *ngIf="trainingInfoForm.get('sessionDuration')?.invalid && trainingInfoForm.get('sessionDuration')?.touched" class="error-message">
            La durée des sessions est obligatoire
          </div>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="trainingPreference">Type d'entraînement préféré *</label>
          <select id="trainingPreference" formControlName="trainingPreference" class="form-control">
            <option value="">Sélectionnez votre préférence</option>
            <option *ngFor="let preference of trainingPreferenceOptions" [value]="preference">
              {{ getDisplayName(preference, trainingPreferenceDisplayNames) }}
            </option>
          </select>
          <div *ngIf="trainingInfoForm.get('trainingPreference')?.invalid && trainingInfoForm.get('trainingPreference')?.touched" class="error-message">
            La préférence d'entraînement est obligatoire
          </div>
        </div>

        <div class="form-group">
          <label for="equipment">Équipement disponible *</label>
          <select id="equipment" formControlName="equipment" class="form-control">
            <option value="">Sélectionnez l'équipement</option>
            <option *ngFor="let equip of equipmentOptions" [value]="equip">
              {{ getDisplayName(equip, equipmentDisplayNames) }}
            </option>
          </select>
          <div *ngIf="trainingInfoForm.get('equipment')?.invalid && trainingInfoForm.get('equipment')?.touched" class="error-message">
            L'équipement disponible est obligatoire
          </div>
        </div>
      </div>
    </div>

    <!-- Error Display -->
    <div *ngIf="error" class="error-alert">
      {{ error }}
    </div>

    <!-- Submit Button -->
    <div class="form-actions">
      <button type="submit" [disabled]="trainingInfoForm.invalid || isLoading" class="btn btn-primary">
        <span *ngIf="isLoading" class="spinner"></span>
        {{ isEditMode ? 'Mettre à jour' : 'Créer' }}
      </button>
      <button type="button" (click)="router.navigate(['/dashboard'])" class="btn btn-secondary">
        Annuler
      </button>
    </div>
  </form>
</div> 