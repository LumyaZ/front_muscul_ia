<div class="home-container">
  <app-header></app-header>

  <main class="home-content">
    <div *ngIf="isLoading" class="loading-container">
      <div class="loading-spinner">
        <div class="spinner"></div>
        <p>Chargement...</p>
      </div>
    </div>

    <div *ngIf="error && !isLoading" class="error-container">
      <div class="error-card">
        <i class="fas fa-exclamation-triangle"></i>
        <h3>Erreur</h3>
        <p>{{ error }}</p>
        <button (click)="clearError()" class="btn-retry">
          <i class="fas fa-refresh"></i>
          Réessayer
        </button>
      </div>
    </div>

    <div *ngIf="!isLoading && !error" class="main-content">
      <!-- Welcome Section -->
      <div class="welcome-section" *ngIf="currentUser">
        <div class="welcome-content">
          <h1>Bienvenue, {{ currentUser.email }} !</h1>
          <p>Retrouvez vos entraînements récents et démarrez votre session</p>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions">
        <div class="action-card primary" (click)="startNewTraining()">
          <div class="action-icon">
            <i class="fas fa-plus-circle"></i>
          </div>
          <div class="action-content">
            <h3>Nouvel Entraînement</h3>
            <p>Démarrez une nouvelle session d'entraînement</p>
          </div>
        </div>

        <div class="action-card secondary" (click)="viewPrograms()">
          <div class="action-icon">
            <i class="fas fa-list-alt"></i>
          </div>
          <div class="action-content">
            <h3>Mes Programmes</h3>
            <p>Gérez vos programmes d'entraînement</p>
          </div>
        </div>
      </div>

      <!-- Recent Trainings Section -->
      <div class="recent-trainings-section">
        <div class="section-header">
          <h2>Entraînements Récents</h2>
          <button (click)="viewAllTrainings()" class="btn-view-all">
            Voir tout
            <i class="fas fa-arrow-right"></i>
          </button>
        </div>

        <div *ngIf="recentTrainings.length === 0" class="empty-state">
          <div class="empty-icon">
            <i class="fas fa-dumbbell"></i>
          </div>
          <h3>Aucun entraînement récent</h3>
          <p>Commencez votre premier entraînement pour voir votre historique ici</p>
          <button (click)="startNewTraining()" class="btn-start-training">
            <i class="fas fa-play"></i>
            Commencer un entraînement
          </button>
        </div>

        <div *ngIf="recentTrainings.length > 0" class="trainings-grid">
          <div *ngFor="let training of recentTrainings" class="training-card">
            <div class="training-header">
              <div class="training-icon">
                <i class="fas fa-dumbbell"></i>
              </div>
              <div class="training-info">
                <h3>{{ training.name || 'Entraînement' }}</h3>
                <p class="training-date">{{ formatDate(training.sessionDate) }}</p>
              </div>
            </div>
            
            <div class="training-details">
              <div class="detail-item">
                <i class="fas fa-clock"></i>
                <span>{{ formatDuration(training.durationMinutes) }}</span>
              </div>
              <div *ngIf="training.sessionType" class="detail-item">
                <i class="fas fa-tag"></i>
                <span>{{ training.sessionType }}</span>
              </div>
            </div>

            <div *ngIf="training.description" class="training-description">
              <p>{{ training.description }}</p>
            </div>

            <div class="training-actions">
              <button class="btn-view-training">
                <i class="fas fa-eye"></i>
                Voir détails
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Stats Section -->
      <div class="stats-section">
        <h2>Vos Statistiques</h2>
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-calendar-check"></i>
            </div>
            <div class="stat-content">
              <h3>{{ recentTrainings.length }}</h3>
              <p>Entraînements ce mois</p>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-clock"></i>
            </div>
            <div class="stat-content">
              <h3>{{ getTotalDuration() }}</h3>
              <p>Heures d'entraînement</p>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-trophy"></i>
            </div>
            <div class="stat-content">
              <h3>{{ getAverageDuration() }}</h3>
              <p>Durée moyenne</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <app-nav-bar [currentRoute]="'/dashboard/home'"></app-nav-bar>
</div> 